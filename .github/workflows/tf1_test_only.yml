---
name: tf1 test only

on:
  push:
    branches:
      - master
      - private-runner

  pull_request:
    branches:
      - master

  workflow_dispatch:

env:
  DOCKER_BUILDKIT: 1

jobs:
  image-sizing:
    name: find sacrifice packages
    runs-on: ubuntu-18.04
    steps:
      - name: get wajig
        run: apt install wajig
      - name: show me
        run: |
          df -h
          wajig large

# large deletion candidates
# android-*
# androidsdk*
# apache2*
#apertium-*
#aspnetcore-*
#azure-*

# pytest-tf1:
#   name: PyTest TF1
#   runs-on: ubuntu-18.04
#   steps:
#     - uses: actions/checkout@v2
#     - uses: actions/setup-python@v1
#       with:
#         python-version: "3.6"
#     - name: Run armory TF1 docker tests
#       run: |
#         pip install -r requirements.txt
#         version=$(python -m armory --version)
#         bash docker/build-dev.sh tf1
#         docker run -w /armory_dev twosixarmory/tf1:${version} pytest -s ./tests/test_docker
#         docker run -w /armory_dev twosixarmory/tf1:${version} pytest -s ./tests/test_tf1
#         docker run -w /armory_dev twosixarmory/tf1:${version} python \
#         /opt/conda/lib/python3.7/site-packages/object_detection/builders/model_builder_tf1_test.py
